what will the resolver do for this?

cmd request - "execute index-build-only for build 15 for all CODE hosts"

1. resolver loads json file 

2. looks at recipies, reads "index-build-only"

3. reads in the action list:          "index-builder.block",
        "index-builder.install",
        "index-builder.restart",
        "index-builder.unblock",

4. first action is "index-builder.block"

5. look up "packages.index-builder"
5.1 type is "jetty-webapp", locate the package implementation code for jetty-webapp call this "pkgImpl"

6. default apps for "packages.index-builder" is "index-builder"
6.1  from host-role map (provided by deploy info?) look up stage (CODE) and role come up with a list of hosts "idx1", "idx2"

7. call pkgImpl.resolve("block", "idx1")) 
7.1 returns List(
    SshCmd(targetHost = "idx1", cmd = "/opt/deploy/block-this-host")
  )

[actually probably returns a BlockHostCmd which derives from SshCmd]

8. next action is "index-builder.install"

9. repeat 5

10. repeated 6

11. call pkgImpl.resolve("install", "idx1") , returns:
   List(
    ScpCmd(targetHost = "idx1", src = "packages/index-builder/webapps/index-build.war", target = "/jetty-apps/index-build/webapps/index-build.war") 
    ScpCmd(targetHost = "idx1", src = "packages/index-builder/conf/index-build.props", target = "/jetty-apps/index-build/conf/index-build.props")  
   )
11.1 htf did it figure this out? 
 A: because the package name is index-builder, looked in the artifact zip for "packages/<pkgName>" subdirectory, scanned all subfiles,
	generated an entry for each one
 B: the target is "/jetty-apps/<jetty-app-dir>/<src>" where - jetty-app-dir is specificed in pakages.index-builder.data.jetty-app-dir or would 
      default to the package name if we hadn't deliberately made it different 

12. restart ends up calling SshCmd(targetHost = "idx1", cmd = "/opt/deploy/retart-jetty-and-wait index-build")

13. you now have a list of all the commands to run against idx1. repeate for idx2 and concatinate these onto the end of the list.



This list now gets passed to the executor. Which does:

cmds.foreach(_.execute)




